<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Field Reports</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/core@1.2.0/dist/css/tabler.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
  <style>
    .leaflet-container, .leaflet-container * { box-sizing: content-box; }
    .leaflet-container img { max-width: none !important; }
    .leaflet-container.pick-mode { cursor: crosshair !important; }
    tr.row-active { background: rgba(32,107,196,0.08) !important; }
    tr.filtered-out { display: none !important; }
    .active-marker-icon {
      filter: drop-shadow(0 0 6px rgba(32,107,196,0.7)) drop-shadow(0 0 14px rgba(32,107,196,0.4));
    }
    .marker-highlight {
      width: 20px; height: 20px; border-radius: 50%;
      background: rgba(32,107,196,0.3); position: absolute;
      pointer-events: none; animation: hl-pulse 0.8s ease-out forwards;
    }
    @keyframes hl-pulse {
      0% { transform: scale(0.5); opacity: 1; }
      100% { transform: scale(3); opacity: 0; }
    }
  </style>
</head>
<body class="page">
  <div class="d-flex align-items-center px-3 py-2 border-bottom">
    <strong>Field Reports</strong>
    <span class="text-secondary ms-auto small">hyperleaflet demo</span>
  </div>
  {% block content %}{% endblock %}
  <div id="toast-container" style="position:fixed;bottom:16px;right:16px;z-index:9999;"></div>
  <script src="/static/hyperleaflet.umd.js"></script>

  <script>
    function showToast(msg, type) {
      var cls = type === 'warning' ? 'bg-danger' : 'bg-success';
      var el = document.createElement('div');
      el.className = 'toast show ' + cls + ' text-white border-0';
      el.setAttribute('role', 'alert');
      el.innerHTML = '<div class="toast-body py-2 px-3">' + msg + '</div>';
      document.getElementById('toast-container').appendChild(el);
      setTimeout(function() { el.style.opacity = '0'; el.style.transition = 'opacity .3s'; }, 1800);
      setTimeout(function() { el.remove(); }, 2200);
    }
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
